<!DOCTYPE html>
<html lang="ua">
<head>
    <meta charset="utf-8">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <script src="js/jquery-1.11.3.min.js"></script>
    <script src="https://vk.com/js/api/openapi.js?136"></script>

    <!--script type="text/javascript" src="js/script.js"></script-->
    <title>YouthMusic</title>
</head>
<body>

<script>


$(document).ready(function () {
    VK.init({
        apiId: 5704578
    });

    $('#startInitVK').click(function (argument) {
        
        VK.Auth.login(function (session) {
            $("#startInitVK").hide();
            console.log(' VK Session -> ' + JSON.stringify(session));
            user_id = session["session"]["mid"];
            console.log(' User`s ID -> ' + user_id);
            var audios = VK.Api.call('audio.get', {owner_id:user_id, need_user:1, offset:0, count:15, v:5.60}, function(data){

                $('#vkmusic').append("<div class='col-xs-12'></div>");                
                $($(".col-xs-12").get(-1)).append($("<p>You have " + data.response.count + " audios:</p>"));

                // for (var i = 1; i < data.response.items.length; i++) {
                    
                // }

                console.log('audio.get returns it ->' + JSON.stringify(data));
                console.log(data["response"]["items"][1]["id"]); // this is song id
                
                var aud_template = '<audio src="" controls></audio>';

                for (var i = 1; i <= data.response.items.length - 2  ; i++) {
                    console.log(i + 'th iteration');

                    $('#vkmusic').append("<div class='col-xs-12'></div>");
                    a = $($(".col-xs-12").get(-1));

                    var song = data.response.items[i];
                    var song_title = song["artist"] + "--" + song["title"];
                    a.append("<p>" + song_title + "</p>");



                    src = data.response.items[i]["url"];
                    var to_insert = $(aud_template);
                    to_insert.attr("src", src);
                    //to_insert.wrap("<div class='col-xs-12'></div>");
                    a.append(to_insert);
                    a.append("<hr>");
                }
                $('#vkfriends').append("<div class='col-xs-10'></div>");
                $($(".col-xs-10").get(-1)).append("<img src='" + data.response.items[0].photo + "'>");
                $($(".col-xs-10").get(-1)).append("   Мои аудио<br><hr>")
                // var $a_template = $(aud_template);
                // $( "#vkmusic" ).append( $a_template );
                //a.play();

            });

            VK.Api.call('friends.get', {user_id:user_id, order:"hints", v:5.60}, function(data){
                console.log(JSON.stringify(data));

                for (var i = 1; i < 10; i++) {
                     //data.response.items.length

                    var friend_id = data.response.items[i];

                    $('#vkmusic').append("<div class='col-xs-12'></div>");




                    VK.Api.call('audio.get', {owner_id:friend_id, need_user:1, offset:0, count:10, v:5.60}, function(data_friends_audio){
                        console.log('audio.get of id' + friend_id + ' returns it ->' + JSON.stringify(data_friends_audio));
                        var friend_name = data_friends_audio.response.items[0].name;
                        
                        $('#vkmusic').append("<div class='col-xs-12'></div>");                
                        $($(".col-xs-12").get(-1)).append("<hr><hr><hr><hr>");
                        $($(".col-xs-12").get(-1)).append($("<p>" + friend_name + " have " + data_friends_audio.response.count + " audios:</p>"));

                        // for (var i = 1; i < data.response.items.length; i++) {
                            
                        // }

                        console.log('audio.get returns it ->' + JSON.stringify(data_friends_audio));
                        //console.log(data_friends_audio.response.items[1]["id"]); // this is song id
                        
                        var aud_template = '<audio src="" controls></audio>';

                        for (var i = 1; i <= data_friends_audio.response.items.length - 2  ; i++) {
                            console.log(i + 'th iteration');

                            $('#vkmusic').append("<div class='col-xs-12'></div>");
                            a = $($(".col-xs-12").get(-1));

                            var song = data_friends_audio.response.items[i];
                            var song_title = song["artist"] + "--" + song["title"];
                            a.append("<p>" + song_title + "</p>");



                            src = data_friends_audio.response.items[i]["url"];
                            var to_insert = $(aud_template);
                            to_insert.attr("src", src);
                            //to_insert.wrap("<div class='col-xs-12'></div>");
                            a.append(to_insert);
                            a.append("<hr>");
                        }

                        $('#vkfriends').append("<div class='col-xs-10'></div>");
                        $($(".col-xs-10").get(-1)).append("<img src='" + data_friends_audio.response.items[0].photo + "'>");
                        $($(".col-xs-10").get(-1)).append("   " + data_friends_audio.response.items[0].name + "<br><hr>")

                        // var friend_id = data.response["items"][i];
                        // $('#vkmusic').append("<div class='col-xs-10 col-xs-push-2'></div>");
                        // // //.append()
                        // var friend_name = data["response"]["items"][i].name_gen;
                        // $(".col-xs-10").get(-1).append("<p>" + friend_name + " have " + data.response.count + " audios:</p>");     
                        // // for (var i = 1; i < data.response.items.length; i++) {// data.response.items.length
                        // //     var song = data.response["items"][i];
                        // //     var song_title = song["artist"] + "--" + song["title"];
                        // //     $( "#vkmusic" ).append("<p>" + song_title + "</p>")
                        // // }



                        // console.log('audio.get returns it ->' + JSON.stringify(data));
                        // console.log(data["response"]["items"][1]["id"]); // this is song id

                        // var aud_template = '<audio src="" controls></audio>';

                        // for (var i = 1; i <= data.response["items"].length ; i++) {
                        //     // $('#vkmusic').append("<div class='col-xs-'></div>");
                        //     $('#vkmusic').append("<div class='col-xs-10 col-xs-push-2'></div>");
                        //     // $('#vkmusic').append("<div class='col-xs-3'></div>");

                        //     var song = data.response["items"][i];
                        //     var song_title = song["artist"] + "--" + song["title"];
                        //     a = $(".col-xs-10").get(-1);
                            
                        //     $(a).append("<p>" + song_title + "</p>");
                        //     console.log(i + 'th iteration');
                        //     src = data.response.items[i]["url"];
                        //     var to_insert = $(aud_template);
                        //     to_insert.attr("src", src);
                        //     // to_insert.wrap(function() {
                        //     //     return "<div class='col-xs-12'></div>";
                        //     // });
                        //     console.log(to_insert);
                        //     //$('#vkmusic').append("<div class='col-xs-12'></div>");
                        //     $(a).append(to_insert);
                        //     $(a).append("<hr>");
                        //     //.wrap("<p></p>");//"<div class='col-xs-12'>" + to_insert + "</div>");
                        // }
                        // var $a_template = $(aud_template);
                        // $( "#vkmusic" ).append( $a_template );
                        //a.play();
                    })
                
                }
            });
        }, 15)
    });

    
})

    
    

</script>


    
    

</script>


<nav class="navbar navbar-default navbar-static-top navbar-fixed-top" style="margin:0;padding:0;border:none">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mylinks"
                    aria-expanded="false" >
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">
                <img class="img-responsive" src="img/logo2.png" style=" max-height:61px;margin-top:-20px;">
            </a>
            <p class="navbar-text">Welcome to Youth Music</p>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="mylinks" onclick="return false;">
            <div class="navbar-header navbar-right">
                <ul class="nav navbar-nav">
                    <li id="startInitVK"  ><a href="#">
                        Sign In</a>
                    </li>
                </ul>
            </div>
            <div class="navbar-header navbar-right">
                <img src="img/sing.png" style=" max-height:60px;">
            </div>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>
<!-- Modal log-in -->
<div class="modal fade" id="myModalLog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Название модали</h4>
            </div>
            <div class="col-xs-12 col-md-6 col-md-offset-3">
                <form role="form">
                    <h1>Войти</h1>
                    <div class="form-group has-success">
                        <label for="exampleInputEmail1" class='control-label'>Email</label>
                        <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email">
                        <span class="glyphicon glyphicon-ok form-control-feedback"
                              style="top:13em;text-align: left;"></span>
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword1">Пароль</label>
                        <input type="password" class="form-control" id="exampleInputPassword1"
                               placeholder="Password">
                    </div>
                    <div class="checkbox">
                        <label>
                            <input type="checkbox"> Запомнить меня
                        </label>
                    </div>
                    <button type="submit" class="btn btn-default">Отправить</button>
                </form>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


<nav class="navbar navbar-default navbar-fixed-bottom" id="player">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <a class="navbar-brand" href="#">
                <span class="glyphicon glyphicon-backward" aria-hidden="true"></span>
            </a>
            <a class="navbar-brand" href="#">
                <span class="glyphicon glyphicon-play" aria-hidden="true"></span>
            </a>
            <a class="navbar-brand" href="#">
                <span class="glyphicon glyphicon-forward" aria-hidden="true"></span>
            </a>
            <p class="navbar-text">Young Music - Young Power.</p>
        </div>

    </div><!-- /.container-fluid -->
</nav>

    <div class="parallax">

    </div>

<div id="cont">

    <nav class="navbar navbar-default navbar-static-top " data-spy="affix" data-offset-top="440" >
        <div class="container-fluid">            
            <div class="navbar-header">
                <ul class="nav nav-tabs" role="tablist" id="tabs">
                  <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab" >All</a></li>
                  <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">Artists</a></li>
                  <li role="presentation"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">Albums</a></li>
                  <li role="presentation"><a href="#settings" aria-controls="settings" role="tab" data-toggle="tab">Genres</a></li>
                </ul>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <form class="navbar-form navbar-left">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search music">
                    </div>
                    <button type="submit" class="btn btn-default button-grey" id="subbut">SEARCH</button>
                </form> 
            </div><!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <!-- Tab panes -->
    <div class="tab-content"  data-offset-top="0">
      <div role="tabpanel" class="tab-pane fade in active" id="home">
        <!-- Контент для вкладки my-->
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum maxime nihil iusto explicabo pariatur, quos earum quisquam incidunt tempora delectus laborum minima exercitationem corporis deserunt est optio sunt facere modi?
      </div>
      <div role="tabpanel" class="tab-pane fade " id="profile">
        <!-- Контент для вкладки my-->
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum maxime nihil iusto explicabo pariatur, quos earum quisquam incidunt tempora delectus laborum minima exercitationem corporis deserunt est optio sunt facere modi?
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum maxime nihil iusto explicabo pariatur, quos earum quisquam incidunt tempora delectus laborum minima exercitationem corporis deserunt est optio sunt facere modi?

      </div>
      <div role="tabpanel" class="tab-pane fade " id="messages">
        <!-- Контент для вкладки my-->
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum maxime nihil iusto explicabo pariatur, quos earum quisquam incidunt tempora delectus laborum minima exercitationem corporis deserunt est optio sunt facere modi?
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum maxime nihil iusto explicabo pariatur, quos earum quisquam incidunt tempora delectus laborum minima exercitationem corporis deserunt est optio sunt facere modi?
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum maxime nihil iusto explicabo pariatur, quos earum quisquam incidunt tempora delectus laborum minima exercitationem corporis deserunt est optio sunt facere modi?

      </div>
      <div role="tabpanel" class="tab-pane fade " id="settings">
        <!-- Контент для вкладки my-->        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum maxime nihil iusto explicabo pariatur, quos earum quisquam incidunt tempora delectus laborum minima exercitationem corporis deserunt est optio sunt facere modi?
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum maxime nihil iusto explicabo pariatur, quos earum quisquam incidunt tempora delectus laborum minima exercitationem corporis deserunt est optio sunt facere modi?
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum maxime nihil iusto explicabo pariatur, quos earum quisquam incidunt tempora delectus laborum minima exercitationem corporis deserunt est optio sunt facere modi?
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum maxime nihil iusto explicabo pariatur, quos earum quisquam incidunt tempora delectus laborum minima exercitationem corporis deserunt est optio sunt facere modi?

      </div>

    </div>

    <div id="vkmusic" class="col-xs-6 col-xs-push-2"></div>
    <div id="vkfriends" class="col-xs-4 col-xs-push-2"></div>
</div>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.js"></script>
<script src="js/ourjs.js"></script>
</body>
</html>
